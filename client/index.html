<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <title>Appetite  |  Stuff your apps.</title>
    <link href="styles.css" rel="stylesheet" type="text/css"/>

    <script src="js/prototype.js" type="text/javascript"></script>
    <script src="js/data.js" type="text/javascript"></script>
    <script src="js/client.js" type="text/javascript"></script>

    <script type="text/javascript">
        var selectedTab;
        var selectedTabElement;

        var channels = { catalog: true, web: true, beta: true };
        var appetite = new Appetite(data);

        function selectTab(h2) {
            h2.parentNode.parentNode.className = "tab selected";
            if (selectedTabElement) selectedTabElement.parentNode.parentNode.className = "tab";

            selectedTabElement = h2;
            selectedTab = h2.id;

            loadApps(selectedTab);
        }

        function loadApps(type, search) {
            // sync the channels object with the channels checkboxes
            channels.catalog = $("chk_catalog").checked;
            channels.web = $("chk_web").checked;
            channels.beta = $("chk_beta").checked;

            // request the right data from the server
            var functionName = (search && search != "") ?
                               "search_" + selectedTab :
                               "explore_" + selectedTab;

            console.log(functionName);

            var appFunction = appetite[functionName];

            console.log(appFunction);

            var apps = appFunction.apply(appetite);

            console.log(apps);

            // display the data
            displayApps(apps);
        }

        function displayApps(apps) {
            var appContainer = $("app_container");

            // yeah, i'm doing it as a string; you got a problem with that?
            var appHTML = "";
            for (var i = 0; i < apps.length; i++) {
                var app = '<div class="model">' +
                            '<div class="module_crnr"><img src="images/crnr_cat.png" width="35" height="35" /></div>' +
                            '<img class="screen" src="images/screen_fandango.png" width="106" height="158" />' +
                            '<div class="module_hd"><img class="icon" src="images/icn_fandango.png" width="32" height="32" /> FREE' +
                                '<div class="clearing">&nbsp;</div>' +
                            '</div>' +
                            '<h1>Fandango</h1>' +
                            'Fandango<br />' +
                            'Entertainment, Movies<br />' +
                            '<div class="module_rating"><img src="images/stars_4-0.png" width="77" height="12" /><br />' +
                                '431 comments</div>' +
                            'v0.65.0  |  6.23MB<br />' +
                            '1,644,685 downloads' +
                            '<div class="module_foot"><img src="images/btn_moreinfo.png" alt="More Info" width="74" height="20" /><img src="images/btn_install.png" alt="Install" width="74" height="20" /></div>' +
                          '</div>\n';
                appHTML += app;
            }

            console.log(appHTML);

            appContainer.innerHTML = appHTML;
        }
    </script>
</head>
<body onload="selectTab($('top_rated'))">
<div class="wrapper">
<div class="pg_head_wrapper">
    <div class="pg_hd"><img class="logo" src="images/logo.png" width="218" height="58"/>

        <div class="tag">A demonstration of Palm's open app ecosystem</div>
        <div class="search_wrapper">
            <div class="search_field">
                <input name="textfield2" type="text" id="textfield2" value="Search"/>
            </div>
        </div>
    </div>
</div>
<div class="navbar_wrapper">
    <div class="navbar">
        <div class="tab">
            <div class="tab_head">
                <h2 id="top_rated" onclick="selectTab(this)">Top Rated</h2>
            </div>
        </div>
        <div class="tab">
            <div class="tab_head">
                <h2 id="top_paid" onclick="selectTab(this)">Top Paid</h2>
            </div>
        </div>
        <div class="tab">
            <div class="tab_head">
                <h2 id="top_free" onclick="selectTab(this)">Top Free</h2>
            </div>
        </div>
        <div class="tab">
            <div class="tab_head">
                <h2 id="top_grossing" onclick="selectTab(this)">Top Grossing</h2>
            </div>
        </div>
        <div class="tab">
            <div class="tab_head">
                <h2 id="top_overall" onclick="selectTab(this)">Top Overall</h2>
            </div>
        </div>
        <div class="tab">
            <div class="tab_head">
                <h2 id="newest" onclick="selectTab(this)">Newest</h2>
            </div>
        </div>
        <div class="tab">
            <div class="tab_head">
                <h2 id="all" onclick="selectTab(this)">All</h2>
            </div>
        </div>
    </div>
</div>
<div class="pg_content">
<div class="sort">
    <table border="0" cellspacing="0" cellpadding="0">
        <tr>
            <td><input name="checkbox" type="checkbox" id="chk_catalog" checked="checked"/></td>
            <td>Palm App Catalog</td>
            <td>&nbsp;</td>
            <td><input name="checkbox2" type="checkbox" id="chk_web" checked="checked"/></td>
            <td>Web Distribution</td>
            <td>&nbsp;</td>
            <td><input name="checkbox3" type="checkbox" id="chk_beta" checked="checked"/></td>
            <td>Beta</td>
        </tr>
    </table>
</div>
<div id="app_container">
</div>
<div class="clearing">&nbsp;</div>
</div>
<div class="pg_foot">Copyright and all that jazz.</div>
</div>
</body>
</html>
